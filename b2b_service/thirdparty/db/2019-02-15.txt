CREATE TABLE `third_quanyi` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `distributor_id` int(11) unsigned NOT NULL COMMENT '分销商id',
  `distributor_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '分销商名称',
  `third_phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '第三方手机号',
  `third_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '第三方验证码（核心，在苏宁表示订单号）',
  `third_sku_no` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '第三方最终sku',
  `third_order_detail` text COLLATE utf8mb4_general_ci COMMENT '第三方明细json串',
  `last_modify_request` text COLLATE utf8mb4_general_ci COMMENT '第三方最后一次请求修改明细',
  `third_user_remark` varchar(512) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '第三方用户备注',
  `exchange_id` int(11) unsigned DEFAULT NULL COMMENT '兑换活动id',
  `exchange_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '兑换活动名称',
  `exchange_code_id` int(11) unsigned DEFAULT NULL COMMENT '兑换码id',
  `plain_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '明码',
  `secret_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '暗码',
  `material_id` int(11) unsigned DEFAULT NULL COMMENT '材质id',
  `material_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '材质名称',
  `customer_id` int(11) unsigned DEFAULT NULL COMMENT 'c端客户id',
  `customer_no` varchar(50) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'c端客户编号',
  `order_id` int(11) unsigned DEFAULT NULL COMMENT 'b2b系统订单id',
  `dispatch_flag` smallint(4) unsigned DEFAULT '0' COMMENT '是否已派工 0否 1是',
  `sign_in_flag` smallint(4) unsigned DEFAULT '0' COMMENT '是否已签到 0否 1是',
  `destroy_flag` smallint(4) unsigned DEFAULT '0' COMMENT '是否已核销 0否 1是',
  `cancel_flag` smallint(4) unsigned DEFAULT '0' COMMENT '是否已取消 0否 1是',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `destroy_time` datetime DEFAULT NULL COMMENT '核销时间',
  `cancel_time` datetime DEFAULT NULL COMMENT '取消时间',
  `update_time` datetime DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_distributor_code` (`distributor_id`,`third_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci COMMENT='权益';

CREATE TABLE `third_quanyi_log` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
  `third_quanyi_id` int(11) DEFAULT NULL COMMENT '对应的权益id',
  `direction` smallint(4) DEFAULT NULL COMMENT '请求方向 1第三方访问-本系统 2.本系统访问第三方',
  `url` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '请求地址',
  `header` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci COMMENT '请求头',
  `param` text COLLATE utf8mb4_general_ci COMMENT '请求参数',
  `response` text COLLATE utf8mb4_general_ci COMMENT '响应',
  `operator_user_type` smallint(4) NOT NULL COMMENT '操作人分类 1、苏宁 2、b2b系统 3、系统管理员 4、c端用户',
  `operator_id` int(11) DEFAULT NULL COMMENT '操作人id',
  `operator_name` varchar(50) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '操作人名称',
  `operate_type` smallint(4) DEFAULT NULL COMMENT '操作类型',
  `remark` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '备注',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`),
  KEY `key_third_quanyi_id` (`third_quanyi_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;